<svg xmlns="http://www.w3.org/2000/svg" style="background-color:#fff" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="500" viewBox="-0.5 -0.5 600 500"><path fill="#FFF" stroke="#000" pointer-events="all" d="M274.9 60h90v40h-90z"/><switch transform="translate(-.5 -.5)"><foreignObject style="overflow:visible;text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:88px;height:1px;padding-top:80px;margin-left:276px"><div style="box-sizing:border-box;font-size:0;text-align:center" data-drawio-colors="color: rgb(0, 0, 0);"><div style="display:inline-block;font-size:14px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;overflow-wrap:normal">App server</div></div></div></foreignObject><text x="320" y="84" font-family="Helvetica" font-size="14" text-anchor="middle">App server</text></switch><path fill="#FFF" stroke="#000" pointer-events="all" d="M219.9 231h260v209h-260z"/><path fill="#FFF" stroke="#000" pointer-events="all" d="M259.9 370h120v40h-120z"/><switch transform="translate(-.5 -.5)"><foreignObject style="overflow:visible;text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:118px;height:1px;padding-top:390px;margin-left:261px"><div style="box-sizing:border-box;font-size:0;text-align:center" data-drawio-colors="color: rgb(0, 0, 0);"><div style="display:inline-block;font-size:14px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;overflow-wrap:normal">Browser</div></div></div></foreignObject><text x="320" y="394" font-family="Helvetica" font-size="14" text-anchor="middle">Browser</text></switch><path fill="#FFF" stroke="#000" pointer-events="all" d="M279.9 260h80v40h-80z"/><switch transform="translate(-.5 -.5)"><foreignObject style="overflow:visible;text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:78px;height:1px;padding-top:280px;margin-left:281px"><div style="box-sizing:border-box;font-size:0;text-align:center" data-drawio-colors="color: rgb(0, 0, 0);"><div style="display:inline-block;font-size:14px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;overflow-wrap:normal">Main app</div></div></div></foreignObject><text x="320" y="284" font-family="Helvetica" font-size="14" text-anchor="middle">Main app</text></switch><path d="M274.9 70q-45-40-70-35t-25 40q0 35 81.43 17.86" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="m273.81 90.23-14.89 11.82 2.41-9.19-5.91-7.45Z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><switch transform="translate(-.5 -.5)"><foreignObject style="overflow:visible;text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:1px;height:1px;padding-top:62px;margin-left:121px"><div style="box-sizing:border-box;font-size:0;text-align:center" data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);"><div style="display:inline-block;font-size:14px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;background-color:#fff;white-space:nowrap"><div style="font-size:14px">1. Provision server</div><div style="font-size:14px">with signing keys</div></div></div></div></foreignObject><text x="121" y="66" font-family="Helvetica" font-size="14" text-anchor="middle">1. Provision server...</text></switch><path d="M319.9 300v56.13" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="m319.9 368.88-8.5-17 8.5 4.25 8.5-4.25Z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><switch transform="translate(-.5 -.5)"><foreignObject style="overflow:visible;text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe flex-start;width:1px;height:1px;padding-top:331px;margin-left:242px"><div style="box-sizing:border-box;font-size:0;text-align:left" data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);"><div style="display:inline-block;font-size:14px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;background-color:#fff;white-space:nowrap"><div style="font-size:14px" align="left">2. PushManager.subscribe()</div></div></div></div></foreignObject><text x="242" y="335" font-family="Helvetica" font-size="14">2. PushManager.subscribe()</text></switch><path d="M319.9 260V113.87" fill="none" stroke="#000" stroke-miterlimit="10" pointer-events="stroke"/><path d="m319.9 101.12 8.5 17-8.5-4.25-8.5 4.25Z" stroke="#000" stroke-miterlimit="10" pointer-events="all"/><switch transform="translate(-.5 -.5)"><foreignObject style="overflow:visible;text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe flex-start;width:1px;height:1px;padding-top:171px;margin-left:238px"><div style="box-sizing:border-box;font-size:0;text-align:left" data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);"><div style="display:inline-block;font-size:14px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;background-color:#fff;white-space:nowrap"><div style="font-size:14px" align="left">3. Send to app server:</div><div style="font-size:14px" align="left">- push service endpoint</div><div style="font-size:14px" align="left">- push service public encryption key</div></div></div></div></foreignObject><text x="238" y="175" font-family="Helvetica" font-size="14">3. Send to app server:...</text></switch><path fill="#FFF" pointer-events="all" d="M399.9 240h70v40h-70z"/><switch transform="translate(-.5 -.5)"><foreignObject style="overflow:visible;text-align:left" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:68px;height:1px;padding-top:260px;margin-left:401px"><div style="box-sizing:border-box;font-size:0;text-align:center" data-drawio-colors="color: rgb(0, 0, 0);"><div style="display:inline-block;font-size:14px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;overflow-wrap:normal">Device</div></div></div></foreignObject><text x="435" y="264" font-family="Helvetica" font-size="14" text-anchor="middle">Device</text></switch></svg>