---
title: NSS Tools cmsutil
slug: Mozilla/Projects/NSS/tools/NSS_Tools_cmsutil
---
<h2 id="Using_cmsutil">Using cmsutil</h2>

Newsgroup: <a href="news://news.mozilla.org/mozilla.dev.tech.crypto">mozilla.dev.tech.crypto</a><br>

<p>
    The cmsutil command-line utility uses the <a href="../smime/">S/MIME Toolkit</a> to perform basic operations, such
    as encryption and decryption, on
    <a href="http://www.ietf.org/rfc/rfc2630.txt">Cryptographic Message Syntax (CMS)</a> messages.

</p>
<h2 id="Syntax_2"><a id="Syntax"></a>
    <a id="1028268">
        Syntax
    </a>
</h2><a id="1033678">
    To run cmsutil, type the command</a>
<a id="1033679">
    <code>cmsutil </code><i>option</i><code> [</code><i>arguments</i><code>]</code></a>
<a id="1028271">
    where <i>option</i> and <i>arguments</i> are combinations of the options and arguments listed in the following
    section.
    Each command takes one option. Each option may take zero or more arguments. To see a usage string, issue the command
    without options. </a>

<h3 id="Options_and_Arguments">
    <a id="1027593">
        Options and Arguments
    </a>
</h3>

<a id="1028291"></a>
Options specify an action. Option arguments modify an action. The options and arguments for the <code>cmsutil</code>
command are defined as follows:
<table>
    <tbody>
        <tr>
            <td><a id="1043286">
                    <b>Options
                    </b></a></td>
            <td>
                <p><a id="1043288">
                    </a></p>

            </td>
        </tr>
        <tr>
            <td>
                <p><a id="1032245">
                        <code>-D</code></a></p>
            </td>
            <td>
                <p>Decode a message.</p>
            </td>
        </tr>

        <tr>
            <td>
                <p><a id="1032249">
                        <code>-C</code></a></p>
            </td>
            <td>
                <p><a id="1038844">
                        Encrypt a message. </a></p>
            </td>
        </tr>

        <tr>
            <td>
                <p><a id="1038660">
                        <code>-E </code></a></p>
            </td>
            <td>
                <p><a id="1038851">
                        Envelope a message. </a></p>
            </td>
        </tr>

        <tr>
            <td>
                <p><a id="1038656">
                        <code>-O </code></a></p>
            </td>
            <td>
                <p><a id="1038943">
                        Create a certificates-only message. </a></p>
            </td>
        </tr>

        <tr>
            <td>
                <p><a id="1038652">
                        <code>-S </code></a></p>
            </td>
            <td>
                <p><a id="1038654">
                        Sign a message.</a></p>
            </td>
        </tr>

        <tr>
            <td><b>Arguments</b></td>
            <td>
                <p><a id="1043284">
                    </a></p>

            </td>
        </tr>
        <tr>
            <td>
                <p><a id="1038834">
                        <code>-c</code> <i>content</i></a></p>
            </td>
            <td>
                <p><a id="1039085">
                        Use this detached content (decode only). </a></p>
            </td>
        </tr>

        <tr>
            <td>
                <p>
                        <code>-d</code> <i>dbdir</i></p>
            </td>
            <td>
                <p>
                    Specify the key/certificate database directory (default is ".")</p>
            </td>
        </tr>

        <tr>
            <td>
                <p><a id="1037903">
                        <code>-e</code> <i>envfile</i></a></p>
            </td>
            <td>
                <p><a id="1039095">
                        Specify a file containing an enveloped message for a set of recipients to which you would
                        like to send an encrypted message.
                        If this is the first encrypted message for that set of recipients, a new enveloped message
                        will be created
                        that you can then use for future messages (encrypt only).</a></p>

            </td>
        </tr>
        <tr>
            <td>
                <p><a id="1037899">
                        <code>-G</code></a></p>
            </td>
            <td>
                <p><a id="1039102">
                        Include a signing time attribute (sign only).</a></p>

            </td>
        </tr>
        <tr>
            <td>
                <p><a id="1038731">
                        <code>-h</code> <i>num</i></a></p>
            </td>
            <td>
                <p><a id="1039116">
                        Generate email headers with info about CMS message (decode only).</a></p>

            </td>
        </tr>
        <tr>
            <td>
                <p><a id="1038727">
                        <code>-i</code> <i>infile</i></a></p>
            </td>
            <td>
                <p><a id="1039213">
                        Use <i>infile</i> as a source of data (default is stdin).</a></p>

            </td>
        </tr>
        <tr>
            <td>
                <p><a id="1038723">
                        <code>-N</code> <i>nickname</i></a></p>
            </td>
            <td>
                <p><a id="1039235">
                        Specify nickname of certificate to sign with (sign only).</a></p>

            </td>
        </tr>
        <tr>
            <td>
                <p><a id="1038719">
                        <code>-n</code> </a></p>
            </td>
            <td>
                <p><a id="1039652">
                        Suppress output of contents (decode only).</a></p>

            </td>
        </tr>
        <tr>
            <td>
                <p><a id="1038715">
                        <code>-o</code> <i>outfile</i></a></p>
            </td>
            <td>
                <p><a id="1038717">
                        Use outfile as a destination of data (default is stdout). </a></p>


            </td>
        </tr>
        <tr>
            <td>
                <p><a id="1038711">
                        <code>-P</code> </a></p>
            </td>
            <td>
                <p><a id="1038713">
                        Include an S/MIME capabilities attribute. </a></p>

            </td>
        </tr>
        <tr>
            <td>
                <p><a id="1043973">
                        -p <i>password</i>
                    </a></p>
            </td>
            <td>
                <p><a id="1043985">
                        Use password as key database password. </a></p>
            </td>
        </tr>

        <tr>
            <td>
                -r&amp;nbsp<i>recipient1</i>,<i>recipient2, . .&amp;nbsp.
                </i></td>
            <td>
                Specify list of recipients (email addresses) for an encrypted or enveloped message.
                For certificates-only message, list of certificates to send.</td>
        </tr>

        <tr>
            <td>
                -T
            </td>
            <td>Suppress content in CMS message (sign only).</td>
        </tr>

        <tr>
            <td>
                -u <i>certusage</i>
            </td>
            <td>Set type of cert usage (default is &lt;tt&gt;certUsageEmailSigner)&lt;/tt&gt;.</td>
        </tr>

        <tr>
            <td>
                &lt;-Y <i>ekprefnick</i>
            </td>
            <td>Specify an encryption key preference by nickname.</td>
        </tr>


    </tbody>
</table>

<h2 id="Usage">Usage</h2>

cmsutil -C [-i <i>infile</i>] [-o <i>outfile</i>]
[-d <i>dbdir</i>] [-p <i>password</i>] -r "<i>recipient1</i>,<i>recipient2</i>, . . ." -e <i>envfile</i>

<p>cmsutil -D [-i <i>infile</i>] [-o <i>outfile</i>]
    [-d <i>dbdir</i>] [-p <i>password</i>] [-c <i>content</i>] [-n] [-h <i>num</i>]

</p>
<p>cmsutil -E [-i <i>infile</i>] [-o <i>outfile</i>]
    [-d <i>dbdir</i>] [-p <i>password</i>] -r "<i>recipient1</i>,<i>recipient2</i>,&amp;nbsp.&amp;nbsp.&amp;nbsp."
</p>
<p>cmsutil -O [-i <i>infile</i>] [-o <i>outfile</i>]
    [-d <i>dbdir</i>] [-p <i>password</i>] -r "<i>cert1</i>,<i>cert2</i>, . . ."

</p>
<p>cmsutil -S [-i <i>infile</i>] [-o <i>outfile</i>]
    [-d <i>dbdir</i>] [-p <i>password</i>] -N <i>nickname</i>[-TGP] [-Y <i>ekprefnick</i>]</p>
