---
title: NSS environment variables
slug: Mozilla/Projects/NSS/Reference/NSS_environment_variables
tags:
  - NSS
---
<div class="note"><strong>Note: NSS Environment Variables are subject to be changed and/or removed from NSS.</strong></div>

<h3 id="Run-Time_Environment_Variables">Run-Time Environment Variables</h3>

<p>These environment variables affect the RUN TIME behavior of NSS shared libraries. There is a separate set of environment variables that affect how NSS is built, documented below.</p>

<table class="standard-table">
 <tbody>
  <tr>
   <th>Variable</th>
   <th>Type</th>
   <th>Description</th>
   <th>Introduced in version</th>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSRANDCOUNT">NSRANDCOUNT</a></code></td>
   <td>Integer<br>
    (byte count)</td>
   <td>Sets the maximum number of bytes to read from the file named in the environment variable NSRANDFILE (see below).  Makes NSRANDFILE usable with /dev/urandom.</td>
   <td>3.12.3</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSRANDFILE">NSRANDFILE</a></code></td>
   <td>String<br>
    (file name)</td>
   <td>Uses this file to seed the Pseudo Random Number Generator.</td>
   <td>Before 3.0</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_ALLOW_WEAK_SIGNATURE_ALG">NSS_ALLOW_WEAK_SIGNATURE_ALG</a></code></td>
   <td>Boolean<br>
    (any non-empty value to enable)</td>
   <td>Enables the use of MD2 and MD4 inside signatures. This was allowed by default before NSS 3.12.3.</td>
   <td>3.12.3</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_DEBUG_PKCS11_MODULE">NSS_DEBUG_PKCS11_MODULE</a></code></td>
   <td>String<br>
    (module name)</td>
   <td>Name the PKCS#11 module to be traced. <a class="external" href="/en-US/docs/Mozilla/Projects/NSS/NSS_Tech_Notes/nss_tech_note2">PKCS #11 Module Logger </a></td>
   <td>3.6</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_DEFAULT_DB_TYPE">NSS_DEFAULT_DB_TYPE</a></code></td>
   <td>String<br>
    ("dbm", "sql", or "extern")</td>
   <td>Determines the default Database type to open if the app does not specify. <a class="external" href="http://wiki.mozilla.org/NSS_Shared_DB">NSS_Shared_DB</a></td>
   <td>3.12</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_DISABLE_ARENA_FREE_LIST">NSS_DISABLE_ARENA_FREE_LIST</a></code></td>
   <td>String<br>
    (any non-empty value)</td>
   <td>Define this variable to get accurate leak allocation stacks when using leak reporting software. <a href="/en-US/docs/Mozilla/Projects/NSS/Memory_allocation">NSS_Memory_allocation</a></td>
   <td>3.4</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_DISABLE_UNLOAD">NSS_DISABLE_UNLOAD</a></code></td>
   <td>String<br>
    (any non-empty value)</td>
   <td>Disable unloading of dynamically loaded NSS shared libraries during shutdown. Necessary on some platforms to get correct function names when using leak reporting software.</td>
   <td>3.11.8</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_ENABLE_AUDIT">NSS_ENABLE_AUDIT</a></code></td>
   <td>Boolean<br>
    (1 to enable)</td>
   <td>Enable auditing of activities of the NSS cryptographic module in FIPS mode. <a class="external" href="http://wiki.mozilla.org/FIPS_Operational_Environment">Audit Data</a></td>
   <td>3.11.2</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_ENABLE_PKIX_VERIFY">NSS_ENABLE_PKIX_VERIFY</a></code></td>
   <td>Boolean<br>
    (any non-empty value to enable)</td>
   <td>Use libPKIX, rather than the old cert library, to verify certificates.</td>
   <td>3.12</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_FIPS">NSS_FIPS</a></code></td>
   <td>String<br>
    ("fips","true","on","1")</td>
   <td>Will start NSS in FIPS mode.</td>
   <td>3.12.5</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_HASH_ALG_SUPPORT">NSS_HASH_ALG_SUPPORT</a></code></td>
   <td>String</td>
   <td>Specifies agorithms allowed to be used in certain applications, such as in signatures on certificates and CRLs. See documentation at <a class="link-https" href="https://bugzilla.mozilla.org/show_bug.cgi?id=483113#c0">this link</a>.</td>
   <td>3.12.3</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_OUTPUT_FILE">NSS_OUTPUT_FILE</a></code></td>
   <td>String<br>
    (filename)</td>
   <td>Output file path name for the <a class="external" href="/en-US/docs/Mozilla/Projects/NSS/NSS_Tech_Notes/nss_tech_note2">PKCS #11 Module Logger</a>. Default is stdout.</td>
   <td>3.7</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_SDB_USE_CACHE">NSS_SDB_USE_CACHE</a></code></td>
   <td>String<br>
    ("no","yes","auto")</td>
   <td>Controls whether NSS uses a local cache of SQL database contents. Default is "auto". See <a class="external" href="http://bonsai.mozilla.org/cvsblame.cgi?file=/mozilla/security/nss/lib/softoken/sdb.c&amp;rev=1.6#1797">the source</a> for more information.</td>
   <td>3.12</td>
  </tr>
  <tr>
   <td><a href="https://dxr.mozilla.org/security/search?q=NSS_SSL_CBC_RANDOM_IV">NSS_SSL_CBC_RANDOM_IV</a></td>
   <td>String ("0", "1")</td>
   <td>Controls the workaround for the <a href="https://en.wikipedia.org/wiki/Transport_Layer_Security#BEAST_attack">BEAST</a> attack on SSL 3.0 and TLS 1.0. "0" disables it, "1" enables it. It is also known as 1/n-1 record splitting. Default is "1".</td>
   <td></td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_SSL_ENABLE_RENEGOTIATION">NSS_SSL_ENABLE_RENEGOTIATION</a></code></td>
   <td>String<br>
    ([0|n|N],<br>
    [1|u|U],<br>
    [2|r|R],<br>
    [3|t|T])</td>
   <td>(Definition for NSS 3.12.6 and above)<br>
    Sets how TLS renegotiation is handled
    <ul>
     <li>[1|u|U]: SSL_RENEGOTIATE_UNRESTRICTED</li>
    </ul>

    <p style="margin-left: 40px;">Server and client are allowed to renegotiate without any restrictions.<br>
     This setting was the default prior 3.12.5 and makes products vulnerable.</p>

    <ul>
     <li>[0|n|N]: SSL_RENEGOTIATE_NEVER</li>
    </ul>

    <p>Never allow renegotiation - That was the default for 3.12.5 release.</p>

    <ul>
     <li>[3|t|T]: SSL_RENEGOTIATE_TRANSITIONAL</li>
    </ul>

    <p style="margin-left: 40px;">Disallows unsafe renegotiation in server sockets only, but allows clients to continue to renegotiate with vulnerable servers. This value should only be used during the transition period when few servers have been upgraded.</p>

    <ul>
     <li>[2|r|R]: SSL_RENEGOTIATE_REQUIRES_XTN (default)</li>
    </ul>

    <p style="margin-left: 40px;">Only allows renegotiation if the peer's hello bears the TLS renegotiation_info extension.<br>
     This is the safe renegotiation.</p>
   </td>
   <td>3.12.5<br>
    Modified in 3.12.6</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_SSL_REQUIRE_SAFE_NEGOTIATION">NSS_SSL_REQUIRE_SAFE_NEGOTIATION</a></code></td>
   <td>Boolean<br>
    (1 to enable)</td>
   <td>It controls whether safe renegotiation indication is required for initial handshake. In other words a connection will be dropped at initial handshake if a server or client do not support safe renegotiation. The default setting for this option is FALSE.</td>
   <td>3.12.5</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_SSL_SERVER_CACHE_MUTEX_TI">NSS_SSL_SERVER_CACHE_MUTEX_TIMEOUT</a></code></td>
   <td>Integer<br>
    (seconds)</td>
   <td>Timeout time to detect dead or hung process in multi-process SSL server. Default is 30 seconds.</td>
   <td>3.4</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_STRICT_NOFORK">NSS_STRICT_NOFORK</a></code></td>
   <td>String<br>
    ("1",<br>
    "DISABLED",<br>
    or any other non-empty value)</td>
   <td>It is an error to try to use a PKCS#11 crypto module in a process before it has been initialized in that process, even if the module was initialized in the parent process. Beginning in NSS 3.12.3, Softoken will detect this error. This environment variable controls Softoken's response to that error.
    <ul>
     <li>If set to "1" or unset, Softoken will trigger an assertion failure in debug builds, and will report an error in non-DEBUG builds.</li>
     <li>If set  to "DISABLED", Softoken will ignore forks, and behave as it did in older versions.</li>
     <li>If set to any other non-empty value, Softoken will report an error in both DEBUG and non-DEBUG builds.</li>
    </ul>
   </td>
   <td>3.12.3</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_STRICT_SHUTDOWN">NSS_STRICT_SHUTDOWN</a></code></td>
   <td>String<br>
    (any non-empty value)</td>
   <td>will trigger an assertion failure in debug builds when a program tries to shutdown NSS before freeing all the resources it acquired from NSS while NSS was initialized.</td>
   <td>3.5</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_TRACE_OCSP">NSS_TRACE_OCSP</a></code></td>
   <td>Boolean<br>
    (any value to enable)</td>
   <td>Enables OCSP tracing.<br>
    The trace information is written to the file pointed by NSPR_LOG_FILE (default stderr). See <a class="external" href="http://wiki.mozilla.org/NSS:Tracing">NSS tracing</a></td>
   <td>3.12</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_USE_DECODED_CKA_EC_POINT">NSS_USE_DECODED_CKA_EC_POINT</a></code></td>
   <td>Boolean<br>
    (any value to enable)</td>
   <td>Tells NSS to send EC key points across the PKCS#11 interface in the non-standard unencoded format that was used by default before NSS 3.12.3.</td>
   <td>3.12.3</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_USE_SHEXP_IN_CERT_NAME">NSS_USE_SHEXP_IN_CERT_NAME</a></code></td>
   <td>Boolean<br>
    (any value to enable)</td>
   <td>Tells NSS to allow shell-style wildcard patterns in certificates to match SSL server host names. This behavior was the default before NSS 3.12.3.</td>
   <td>3.12.3</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=PKIX_OBJECT_LEAK_TEST_ABORT_O">PKIX_OBJECT_LEAK_TEST_ABORT_ON_LEAK</a></code></td>
   <td>String<br>
    (any non-empty value)</td>
   <td>Debug variable for PKIX leak checking. Note: <em>The code must be built with PKIX_OBJECT_LEAK_TEST defined to use this functionality.</em></td>
   <td>3.12</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=SOCKETTRACE">SOCKETTRACE</a></code></td>
   <td>Boolean<br>
    (1 to enable)</td>
   <td>Controls tracing of socket activity by libPKIX. Messages sent and received will be timestamped and dumped (to stdout) in standard hex-dump format.</td>
   <td>3.12</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=SQLITE_FORCE_PROXY_LOCKING">SQLITE_FORCE_PROXY_LOCKING</a></code></td>
   <td>Boolean<br>
    (1 to enable)</td>
   <td>1 means force always use proxy, 0 means never use proxy, NULL means use proxy for non-local files only.</td>
   <td>3.12.6</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=SSLBYPASS">SSLBYPASS</a></code></td>
   <td>Boolean<br>
    (1 to enable)</td>
   <td>Uses PKCS#11 bypass for performance improvement.<br>
    Do not set this variable if FIPS is enabled.</td>
   <td>3.11</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=SSLDEBUG">SSLDEBUG</a></code></td>
   <td>Integer</td>
   <td>Debug level<br>
    Note: <em>The code must be built with DEBUG defined to use this functionality.</em></td>
   <td>Before 3.0</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=SSLDEBUGFILE">SSLDEBUGFILE</a></code></td>
   <td>String<br>
    (file name)</td>
   <td>File where debug or trace information is written.
    <p>If not set, the debug or trace information is written to stderr.</p>
    Note: <em>SSLDEBUG or SSLTRACE have to be set to use this functionality.</em></td>
   <td>3.12</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=SSLFORCELOCKS">SSLFORCELOCKS</a></code></td>
   <td>Boolean<br>
    (1 to enable)</td>
   <td>Forces NSS to use locks for protection.<br>
    Overrides the effect of SSL_NO_LOCKS (see ssl.h).</td>
   <td>3.11</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=SSLKEYLOGFILE">SSLKEYLOGFILE</a></code></td>
   <td>String<br>
    (file name)</td>
   <td>Key log file. If set, NSS logs RSA pre-master secrets to this file. This allows packet sniffers to decrypt TLS connections. See <a href="/en-US/docs/Mozilla/Projects/NSS/Key_Log_Format" title="https://developer.mozilla.org/en/NSS_Key_Log_Format">documentation</a>.</td>
   <td>3.12.6</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=SSLTRACE">SSLTRACE</a></code></td>
   <td>Integer</td>
   <td>Tracing level<br>
    Note: <em>The code must be built with TRACE defined to use this functionality.</em></td>
   <td>Before 3.0</td>
  </tr>
 </tbody>
</table>

<h3 id="Build-Time_Environment_Variables">Build-Time Environment Variables</h3>

<p>These environment variables affect the build (compilation) of NSS.</p>

<div class="note"><strong>Note: This section is a work in progress and is not yet complete.</strong></div>

<table class="standard-table">
 <tbody>
  <tr>
   <th>Variable</th>
   <th>Type</th>
   <th>Description</th>
   <th>Introduced in version</th>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=BUILD_OPT">BUILD_OPT</a></code></td>
   <td>Boolean<br>
    (1 to enable)</td>
   <td>Do an optimized (not DEBUG) build. Default is to do a DEBUG build.</td>
   <td>Before 3.0</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=MOZ_DEBUG_SYMBOLS">MOZ_DEBUG_SYMBOLS</a></code></td>
   <td>Boolean<br>
    (1 to enable)</td>
   <td>Needed on Windows to build with versions of MSVC (such as VC8 and VC9) that do not understand /PDB:NONE</td>
   <td>3.11</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=MOZ_DEBUG_FLAGS">MOZ_DEBUG_FLAGS</a></code></td>
   <td>String</td>
   <td>When <code>MOZ_DEBUG_SYMBOLS</code> is set, you may use <code>MOZ_DEBUG_FLAGS</code> to specify alternative compiler flags to produce symbolic debugging information in a particular format.</td>
   <td>3.12.8</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSDISTMODE">NSDISTMODE</a></code></td>
   <td>String</td>
   <td>
    <p>On operating systems other than Windows, this controls whether copies, absolute symlinks, or relative symlinks of the output files should be published to mozilla/dist. The possible values are:</p>

    <ul>
     <li>copy: copies of files are published</li>
     <li>absolute_symlink: symlinks whose targets are absolute pathnames are published</li>
    </ul>
    If not specified, default to relative symlinks (symlinks whose targets are relative pathnames).<br>
    On Windows, copies of files are always published.</td>
   <td>Before 3.0</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NS_UE_GCC">NS_USE_GCC</a></code></td>
   <td>Boolean<br>
    (1 to enable)</td>
   <td>On systems where GCC is not the default compiler, this tells NSS to build with gcc.</td>
   <td>Before 3.0</td>
  </tr>
  <tr>
   <td><a href="https://dxr.mozilla.org/nss/search?q=NSS_ALLOW_SSLKEYLOGFILE">NSS_ALLOW_SSLKEYLOGFILE</a></td>
   <td>Boolean<br>
    (1 to enable)</td>
   <td>Enable NSS support in optimized builds for logging SSL/TLS key material to a logfile if the SSLKEYLOGFILE environment variable. As of NSS 3.24 this is disabled by default.</td>
   <td>3.24</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_BUILD_CONTINUE_ON_ERROR">NSS_BUILD_CONTINUE_ON_ERROR</a></code></td>
   <td>Boolean<br>
    (1 to enable)</td>
   <td>Continue building NSS source directories when a build error occurs.</td>
   <td>3.12.4</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_USE_SYSTEM_SQLITE">NSS_USE_SYSTEM_SQLITE</a></code></td>
   <td>Boolean<br>
    (1 to enable)</td>
   <td>Use the system installed sqlite library instead of the in-tree version.</td>
   <td>3.12.6</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_DISABLE_ECC">NSS_DISABLE_ECC (deprecated)</a></code></td>
   <td>Boolean<br>
    (1 to disable)</td>
   <td>
    <p>Disable Elliptic Curve Cryptography features. As of NSS 3.16, ECC features are enabled by default. As of NSS 3.33 this variable has no effect.</p>
   </td>
   <td>3.16</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_ENABLE_ECC">NSS_ENABLE_ECC (deprecated)</a></code></td>
   <td>Boolean<br>
    (1 to enable)</td>
   <td>Enable building of code that uses Elliptic Curve Cryptography. Unused as of NSS 3.16; see NSS_DISABLE_ECC.</td>
   <td>Before 3.16; since 3.11.</td>
  </tr>
  <tr>
   <td><a href="https://dxr.mozilla.org/nss/search?q=NSS_FORCE_FIPS"><code>NSS_FORCE_FIPS</code></a></td>
   <td>
    <p>Boolean<br>
     (1 to enable)</p>
   </td>
   <td>Allows enabling FIPS mode using <code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_FIPS">NSS_FIPS</a></code></td>
   <td>3.24</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=OS_TARGET">OS_TARGET</a></code></td>
   <td>String<br>
    (target OS)</td>
   <td>For cross-compilation environments only, when the target OS is not the default for the system on which the build is performed.<br>
    Values understood:<br>
    WIN95</td>
   <td>Before 3.0</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=USE_64">USE_64</a></code></td>
   <td>Boolean<br>
    (1 to enable)</td>
   <td>On platforms that has separate 32-bit and 64-bit ABIs, NSS builds for the 32-bit ABI by default. This tells NSS to build for the 64-bit ABI.</td>
   <td>Before 3.0</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=USE_DEBUG_RTL">USE_DEBUG_RTL</a></code></td>
   <td>Boolean<br>
    (1 to enable)</td>
   <td>On Windows, MSVC has options to build with a normal Run Time Library or a debug Run Time Library. This tells NSS to build with the Debug Run Time Library.</td>
   <td>Before 3.0</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=USE_PTHREADS">USE_PTHREADS</a></code></td>
   <td>Boolean<br>
    (1 to enable)</td>
   <td>On platforms where POSIX threads are available, but are not the OS'es preferred threads library, this tells NSS and NSPR to build using pthreads.</td>
   <td>Before 3.0</td>
  </tr>
  <tr>
   <td><code><a class="external" href="https://dxr.mozilla.org/security/search?q=NSS_NO_PKCS11_BYPASS">NSS_NO_PKCS11_BYPASS</a></code></td>
   <td>String<br>
    (1 to enable)</td>
   <td>Disables at compile-time the NS ssl code to bypass the pkcs11 layer. When set the SSLBYPASS run-time variable won't take effect</td>
   <td>Before 3.15</td>
  </tr>
 </tbody>
</table>
